{"ast":null,"code":"import _slicedToArray from\"/Users/jee/Desktop/j_project/emotiondiary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import{DiaryStateContext}from\"../App\";import{getStringDate}from\"../util/date\";import{emotionList}from\"../util/emotion\";import MyHeader from\"../components/MyHeader\";import MyButton from\"../components/MyButton\";//!!! Same structure as Edit.js <Create 'diary/id' address part> \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Diary=function Diary(){var _useParams=useParams(),id=_useParams.id;var diaryList=useContext(DiaryStateContext);var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){var titleElement=document.getElementsByTagName(\"title\")[0];titleElement.innerHTML=\"Emotion Diary - Diary \".concat(id);// eslint-disable-next-line\n},[]);useEffect(function(){if(diaryList.length>=1){var targetDiary=diaryList.find(function(it){return parseInt(it.id)===parseInt(id);});if(targetDiary){setData(targetDiary);}else{alert(\"Invalid path\");navigate('/',{replace:true});}}// eslint-disable-next-line\n},[diaryList,id]);if(!data){return/*#__PURE__*/_jsx(\"div\",{className:\"DiaryPage\",children:\"Loading...\"});}else{var curEmotionData=emotionList.find(function(it){return parseInt(it.emotion_id)===parseInt(data.emotion);});return/*#__PURE__*/_jsxs(\"div\",{className:\"DiaryPage\",children:[/*#__PURE__*/_jsx(MyHeader,{headText:\"\".concat(getStringDate(new Date(data.date)),\" Diary\"),leftchild:/*#__PURE__*/_jsx(MyButton,{text:\"Back\",onClick:function onClick(){return navigate(-1);}}),rightchild:/*#__PURE__*/_jsx(MyButton,{text:\"Edit\",onClick:function onClick(){return navigate(\"/edit/\".concat(data.id));}})}),/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Today's feeling\"}),/*#__PURE__*/_jsxs(\"div\",{className:[\"diary_img_wrapper\",\"diary_img_wrapper_\".concat(data.emotion)].join(\" \"),children:[/*#__PURE__*/_jsx(\"img\",{src:curEmotionData.emotion_img,alt:\"\".concat(data.emotion)}),/*#__PURE__*/_jsx(\"div\",{className:\"emotion_descript\",children:curEmotionData.emotion_descript})]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Today's Diary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"diary_content_wrapper\",children:/*#__PURE__*/_jsx(\"p\",{children:data.content})})]})]})]});}};export default Diary;","map":{"version":3,"names":["useState","useContext","useEffect","useNavigate","useParams","DiaryStateContext","getStringDate","emotionList","MyHeader","MyButton","Diary","id","diaryList","navigate","data","setData","titleElement","document","getElementsByTagName","innerHTML","length","targetDiary","find","it","parseInt","alert","replace","curEmotionData","emotion_id","emotion","Date","date","join","emotion_img","emotion_descript","content"],"sources":["/Users/jee/Desktop/j_project/emotiondiary/src/pages/Diary.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { DiaryStateContext } from \"../App\";\nimport { getStringDate } from \"../util/date\";\nimport { emotionList } from \"../util/emotion\";\nimport MyHeader from \"../components/MyHeader\";\nimport MyButton from \"../components/MyButton\";\n\n\n//!!! Same structure as Edit.js <Create 'diary/id' address part> \nconst Diary = () => {\n    const {id} = useParams();\n    const diaryList = useContext(DiaryStateContext);\n    const navigate = useNavigate();\n    const [data, setData] = useState();\n\n    useEffect(() => {\n        const titleElement = document.getElementsByTagName(\"title\")[0];\n        titleElement.innerHTML = `Emotion Diary - Diary ${id}`;\n        // eslint-disable-next-line\n      }, []);\n\n    useEffect(()=>{\n        if(diaryList.length >= 1){\n            const targetDiary = diaryList.find(\n                (it) => parseInt(it.id) === parseInt(id)\n            ); \n            if(targetDiary){\n                setData(targetDiary);\n            }else{ \n                alert(\"Invalid path\");\n                navigate('/', {replace:true});\n            }\n        }\n        // eslint-disable-next-line\n    },[diaryList, id]);\n\n    if(!data){\n        return <div className=\"DiaryPage\">Loading...</div>;\n    }else{\n        const curEmotionData = emotionList.find(\n            (it) => parseInt(it.emotion_id) === parseInt(data.emotion)\n        );\n        return (\n        <div className=\"DiaryPage\">\n            <MyHeader \n            headText={`${getStringDate(new Date(data.date))} Diary`}\n            leftchild={<MyButton text={\"Back\"} onClick={()=>navigate(-1)} />}\n            rightchild={<MyButton text={\"Edit\"} onClick={()=>navigate(`/edit/${data.id}`)} />}\n            />\n            <article>\n                <section>\n                    <h4>Today's feeling</h4>\n                    <div className={[\"diary_img_wrapper\", `diary_img_wrapper_${data.emotion}`].join(\" \")}>\n                        <img src={curEmotionData.emotion_img} alt={`${data.emotion}`} />\n                        <div className=\"emotion_descript\">\n                            {curEmotionData.emotion_descript}\n                        </div>\n                    </div>\n                </section>\n                <section>\n                    <h4>Today's Diary</h4>\n                    <div className=\"diary_content_wrapper\">\n                        <p>{data.content}</p>\n                    </div>\n                </section>\n            </article>\n        </div>\n        );\n    }\n};\nexport default Diary;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}