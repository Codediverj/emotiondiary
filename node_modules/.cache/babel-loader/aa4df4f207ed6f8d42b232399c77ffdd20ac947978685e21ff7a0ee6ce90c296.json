{"ast":null,"code":"import _objectSpread from\"/Users/jee/Desktop/j_project/emotiondiary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/jee/Desktop/j_project/emotiondiary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useContext,useEffect,useCallback}from\"react\";import{useNavigate}from\"react-router-dom\";import{DiaryDispatchContext}from\"./../App\";import MyHeader from\"./MyHeader\";import MyButton from\"./MyButton\";import EmotionItem from\"./EmotionItem\";//Q1, Q2 Today's date + Today's emotion => From Util folder\nimport{getStringDate}from\"../util/date\";import{emotionList}from\"../util/emotion\";//isEdit, originData FROM Edit.js\n//Edit = isEdit(true) / Create = isEdit(false)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DiaryEditor=function DiaryEditor(_ref){var isEdit=_ref.isEdit,originData=_ref.originData;//1.DATE\nvar _useState=useState(getStringDate(new Date())),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var navigate=useNavigate();//2.EMOTIOM\nvar _useState3=useState(3),_useState4=_slicedToArray(_useState3,2),emotion=_useState4[0],setEmotion=_useState4[1];//Selected emotion => props\n//onClick id data => EmotionItem id data\nvar handleClickEmote=useCallback(function(emotion){setEmotion(emotion);},[]);//3. CONTENT\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var contentRef=useRef();//\"Blank\" content => focus()\n//4. SAVE\nvar _useContext=useContext(DiaryDispatchContext),onCreate=_useContext.onCreate,onEdit=_useContext.onEdit,onRemove=_useContext.onRemove;var handleSubmit=function handleSubmit(){if(content.length<1){contentRef.current.focus();return;}if(window.confirm(isEdit?\"Do you want to edit this diary?\":\"Do you want to write new diary?\")){if(!isEdit){onCreate(date,content,emotion);}else{onEdit(originData.id,date,content,emotion);}}navigate('/',{replace:true});//Prevent going back\n};var handleRemove=function handleRemove(){if(window.confirm(\"Do you want to delete?\"+originData.id)){onRemove(originData.id);navigate(\"/\",{replace:true});}};useEffect(function(){if(isEdit){//show original date\nsetDate(getStringDate(new Date(parseInt(originData.date))));setEmotion(originData.emotion);setContent(originData.content);}},[isEdit,originData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(MyHeader,{headText:isEdit?\"Edit your diary\":\"Write new diary\",leftchild:/*#__PURE__*/_jsx(MyButton,{text:\"Back\",onClick:function onClick(){return navigate(-1);}}),rightchild:isEdit&&/*#__PURE__*/_jsx(MyButton,{text:\"Delete\",type:\"negative\",onClick:handleRemove})}),/*#__PURE__*/_jsxs(\"div\",{className:\"DiaryEditor\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"What is the date today?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input_date\",value:date,type:\"date\",onChange:function onChange(e){return setDate(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Today's feeling\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box emotion_list_wrapper\",children:emotionList.map(function(it){return/*#__PURE__*/_jsx(EmotionItem,_objectSpread(_objectSpread({},it),{},{onClick:handleClickEmote,isSelected:it.emotion_id===emotion}),it.emotion_id);})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Today's Diary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box text_wrapper\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"How was your day?\",ref:contentRef,value:content,onChange:function onChange(e){return setContent(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"control_box\",children:[/*#__PURE__*/_jsx(MyButton,{text:'Cancel',onClick:function onClick(){return navigate(-1);}}),/*#__PURE__*/_jsx(MyButton,{text:'Save',type:'positive',onClick:handleSubmit})]})})]})]});};export default DiaryEditor;","map":{"version":3,"names":["useState","useRef","useContext","useEffect","useCallback","useNavigate","DiaryDispatchContext","MyHeader","MyButton","EmotionItem","getStringDate","emotionList","DiaryEditor","isEdit","originData","Date","date","setDate","navigate","emotion","setEmotion","handleClickEmote","content","setContent","contentRef","onCreate","onEdit","onRemove","handleSubmit","length","current","focus","window","confirm","id","replace","handleRemove","parseInt","e","target","value","map","it","emotion_id"],"sources":["/Users/jee/Desktop/j_project/emotiondiary/src/components/DiaryEditor.js"],"sourcesContent":["import { useState, useRef, useContext, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { DiaryDispatchContext } from \"./../App\"\n\nimport MyHeader from \"./MyHeader\";\nimport MyButton from \"./MyButton\";\nimport EmotionItem from \"./EmotionItem\";\n\n//Q1, Q2 Today's date + Today's emotion => From Util folder\nimport {getStringDate} from \"../util/date\";\nimport {emotionList} from \"../util/emotion\";\n\n//isEdit, originData FROM Edit.js\n//Edit = isEdit(true) / Create = isEdit(false)\nconst DiaryEditor = ({isEdit, originData}) => {\n    \n    //1.DATE\n    const [date, setDate] = useState(getStringDate(new Date()));\n    const navigate = useNavigate();\n\n    //2.EMOTIOM\n    const [emotion, setEmotion] = useState(3);\n    //Selected emotion => props\n    //onClick id data => EmotionItem id data\n    const handleClickEmote = useCallback((emotion) => {\n        setEmotion(emotion);\n      }, []);\n\n    //3. CONTENT\n    const [content, setContent] = useState(\"\");\n    const contentRef = useRef();  //\"Blank\" content => focus()\n    //4. SAVE\n    const {onCreate, onEdit, onRemove} = useContext(DiaryDispatchContext);\n    const handleSubmit = () => {\n        if(content.length < 1){\n            contentRef.current.focus();\n            return;\n        }\n        if(\n            window.confirm(\n                isEdit ? \"Do you want to edit this diary?\" : \"Do you want to write new diary?\"\n                )\n            ){\n                if(!isEdit) {\n                    onCreate(date,content,emotion);\n                }else{\n                    onEdit(originData.id, date, content, emotion);\n                }\n            }\n            navigate('/', {replace:true}); //Prevent going back\n    };\n\n    const handleRemove = () => {\n        if (window.confirm(\"Do you want to delete?\"+originData.id)) {\n          onRemove(originData.id);\n          navigate(\"/\", { replace: true });\n        }\n    };\n\n    useEffect(() => {\n        if(isEdit){\n            //show original date\n            setDate(getStringDate(new Date(parseInt(originData.date))));\n            setEmotion(originData.emotion);\n            setContent(originData.content);\n        }\n    }, [isEdit, originData])\n\n    return(\n        <div className=\"\">\n            {/* Header */}\n            <MyHeader \n            headText={isEdit ? \"Edit your diary\" : \"Write new diary\"}\n            leftchild={\n                <MyButton \n                text={\"Back\"}\n                onClick={() => navigate(-1)}\n                />\n                }\n            rightchild={ isEdit &&\n                <MyButton \n                text={\"Delete\"}\n                type={\"negative\"}\n                onClick={handleRemove}\n                />\n            }    \n            />\n            <div className=\"DiaryEditor\">\n                {/* Q1 */}\n                <section>\n                    <h4>What is the date today?</h4>\n                    <div className=\"input_box\">\n                        <input \n                        className=\"input_date\"\n                        value={date} \n                        type=\"date\" \n                        onChange={(e)=>setDate(e.target.value)}\n                        />\n                    </div>\n                </section>\n                {/* Q2 */}\n                <section>\n                    <h4>Today's feeling</h4>\n                    <div className=\"input_box emotion_list_wrapper\">\n                        {emotionList.map((it) => (\n                            <EmotionItem \n                            key={it.emotion_id} {...it} \n                            onClick={handleClickEmote}\n                            isSelected={it.emotion_id === emotion}\n                            />\n                        ))}\n                    </div>\n                </section>\n                {/* Q3 */}\n                <section>\n                    <h4>Today's Diary</h4>\n                    <div className=\"input_box text_wrapper\">\n                        <textarea \n                        placeholder=\"How was your day?\"\n                        ref={contentRef} value={content}\n                        onChange={(e) => setContent(e.target.value)}/>\n                    </div>\n                </section>\n                {/* Q4 */}\n                <section>\n                    <div className=\"control_box\">\n                        <MyButton text={'Cancel'} \n                        onClick={()=>navigate(-1)}/>\n                        <MyButton text={'Save'} \n                        type={'positive'} onClick={handleSubmit}/>\n                    </div>\n                </section>\n            </div>\n        </div>\n    );\n}\n\nexport default DiaryEditor;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}